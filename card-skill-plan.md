# å¡ç‰ŒæŠ€èƒ½å®ç°è®¡åˆ’ (White Beard & Red Zoro)

## ğŸ¯ æ€»ä½“ç›®æ ‡
å®Œå–„æ¸¸æˆå¼•æ“ä»¥æ”¯æŒã€Œç™½èƒ¡å­ã€å’Œã€Œçº¢ç´¢éš†ã€ä¸¤å¥—ä¸»æµå¡ç»„çš„å®Œæ•´å¯¹æˆ˜ä½“éªŒã€‚

## âœ… å·²å®ç°åŠŸèƒ½å®¡è®¡ (2026-02-08 æ›´æ–°)

> ä»¥ä¸‹æ˜¯å¯¹ç…§ä»£ç åº“å®é™…å®ç°åçš„å®¡è®¡ç»“æœã€‚å¼•æ“é‡‡ç”¨"åŠè‡ªåŠ¨"æ¨¡å¼ï¼šæ ¸å¿ƒæ¸¸æˆæµç¨‹è‡ªåŠ¨åŒ–ï¼Œå¡ç‰Œæ•ˆæœé€šè¿‡é€šç”¨å·¥å…·æ“ä½œï¼ˆUtility Actionsï¼‰æ‰‹åŠ¨æ‰§è¡Œã€‚

### å¼•æ“å±‚å·²å®ç°çš„é€šç”¨å·¥å…·æ“ä½œ (`engine.js`)

| å·¥å…·æ–¹æ³• | Socket äº‹ä»¶ | ç”¨é€” | å¯¹åº”å¡ç‰Œæ•ˆæœ |
|:---|:---|:---|:---|
| `viewTopDeck(count)` | `game:view-top-deck` | æŸ¥çœ‹ç‰Œé¡¶Nå¼  | æ£€ç´¢ç±» (ä¼Šä½/å¥ˆç¾) |
| `resolveSearch(selected, bottom)` | `game:resolve-search` | é€‰1å¼ å…¥æ‰‹ï¼Œå…¶ä½™æ²‰åº• | æ£€ç´¢ç±» (ä¼Šä½/å¥ˆç¾) |
| `searchDeckFiltered(filter)` | `game:search-deck` | æŒ‰æ¡ä»¶(ç‰¹å¾/è´¹ç”¨/é¢œè‰²/ç±»å‹)è¿‡æ»¤å…¨ç‰Œç»„ | é€šç”¨æ£€ç´¢ |
| `pickFromDeck(cardInstanceId)` | `game:pick-from-deck` | ä»ç‰Œç»„é€‰ç‰Œå…¥æ‰‹å¹¶æ´—ç‰Œ | é€šç”¨æ£€ç´¢ |
| `lifeToHand(lifeIndex)` | `game:life-to-hand` | ç”Ÿå‘½åŒºâ†’æ‰‹ç‰Œ | ç™½èƒ¡å­é¢†è¢–æ•ˆæœ |
| `trashToLife(cardInstanceId)` | `game:trash-to-life` | å¼ƒç‰ŒåŒºâ†’ç”Ÿå‘½åŒº | ç‰¹æ®Šæ¢å¤æ•ˆæœ |
| `recoverFromTrash(cardInstanceId)` | `game:recover-trash` | å¼ƒç‰ŒåŒºâ†’æ‰‹ç‰Œ | ä¹”å·´/é©¬å°”é«˜å›æ”¶ |
| `playFromTrash(cardInstanceId, state)` | `game:play-from-trash` | å¼ƒç‰ŒåŒºâ†’åœºä¸Šç™»åœº | é©¬å°”é«˜å¤æ´» |
| `koTarget(playerId, instanceId)` | `game:ko-target` | KOå¯¹æ–¹è§’è‰² | ç«æ‹³æª/æ©¡èƒ¶ç«ç®­ç‚® |
| `bounceToHand(playerId, instanceId)` | `game:bounce-hand` | å¼¹å›æ‰‹ç‰Œ | å¼¹æ‰‹ç‰Œæ•ˆæœ |
| `bounceToBottom(playerId, instanceId)` | `game:bounce-bottom` | æ”¾å›ç‰Œåº• | å¼¹ç‰Œåº•æ•ˆæœ |
| `modifyPower(targetId, delta)` | `game:modify-power` | ä¸´æ—¶æˆ˜åŠ›ä¿®æ”¹(å›åˆç»“æŸæ¸…é™¤) | åå‡»/Buff/Debuff |
| `trashFromHand(cardInstanceId)` | `game:trash-from-hand` | æ‰‹ç‰Œâ†’å¼ƒç‰ŒåŒº | å¼ƒç‰Œè´¹ç”¨ |
| `drawCards(count)` | `game:draw-cards` | æŠ½ç‰Œæ•ˆæœ | å„ç§æŠ½ç‰Œæ•ˆæœ |
| `restTarget(targetId)` | `game:rest-target` | æ¨ªç½®ç›®æ ‡ | æ§åˆ¶æ•ˆæœ |
| `activateTarget(targetId)` | `game:activate-target` | ç«–ç½®ç›®æ ‡ | å”¤é†’æ•ˆæœ |
| `moveDon(direction, count)` | `game:move-don` | DONæ¨ª/ç«–è½¬æ¢ | DONæ“ä½œ |
| `attachDon(targetId, count)` | `game:attach-don` | è´´DON | æ ‡å‡†æ“ä½œ |
| `detachDon(sourceId, count)` | `game:detach-don` | å–ä¸‹DON | æ ‡å‡†æ“ä½œ |
| `setEffectRestriction(key, value)` | `game:set-effect-restriction` | è®¾ç½®æ•ˆæœé™åˆ¶ | OP02-004ç¦ç”Ÿå‘½å…¥æ‰‹ |

### å‰ç«¯ UI å·²å®ç°çš„äº¤äº’ç»„ä»¶ (`Game.tsx`)

| ç»„ä»¶/åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|:---|:---:|:---|
| **æ£€ç´¢å¼¹çª— (Search Modal)** | âœ… | `viewTopDeck(5)` â†’ å¼¹çª—å±•ç¤º5å¼  â†’ é€‰0~1å¼ å…¥æ‰‹ â†’ `resolveSearch()` |
| **å¢“åœ°æŸ¥çœ‹å™¨ (Trash Viewer)** | âœ… | å±•ç¤ºè‡ªå·±/å¯¹æ‰‹å¢“åœ°ï¼Œæ”¯æŒé€‰ä¸­å¡ç‰Œ + å›æ”¶/ç™»åœºæ“ä½œ |
| **ç‰Œç»„æ“ä½œèœå• (Zone Actions)** | âœ… | ç‰Œç»„åŒºï¼šæŠ½1å¼ ã€æŸ¥çœ‹ç‰Œé¡¶5å¼ ï¼›ç”Ÿå‘½åŒºï¼šç”Ÿå‘½â†’æ‰‹ç‰Œ |
| **æˆ˜åŠ›è°ƒæ•´å¼¹çª—** | âœ… | Â±1000 æ­¥è¿›è°ƒæ•´ï¼Œæ”¯æŒ `modifyPower` |
| **åå‡»é€‰æ‹©** | âœ… | å¤šå¼ åå‡»ç‰Œé€‰æ‹© + æ‰‹åŠ¨æˆ˜åŠ›è¡¥æ­£ |
| **é¢†è¢–æ•ˆæœç¡®è®¤å¼¹çª—** | âœ… | ç™½èƒ¡å­å›åˆç»“æŸæ—¶å¼¹çª—ç¡®è®¤ï¼ˆä½†å½“å‰å¼•æ“å·²æ”¹ä¸ºè‡ªåŠ¨æ‰§è¡Œï¼‰ |
| **è½®ç›˜èœå• (RadialMenu)** | âœ… | è§’è‰²/é¢†è¢–å³é”®èœå•ï¼šæ”»å‡»ã€è¿”å›æ‰‹ç‰Œç­‰ |

---

## ğŸ“Š å¡ç‰Œæ•ˆæœå®ç°çŠ¶æ€

### Phase 1: æ ¸å¿ƒæœºåˆ¶æ‰©å±• (Engine & UI)

- [x] **æ£€ç´¢æœºåˆ¶ (Search)** âœ… å·²å®Œæˆ
  - å¼•æ“: `viewTopDeck()` + `resolveSearch()` å…¨é“¾è·¯ (engine.js:1072-1136)
  - å¼•æ“: `searchDeckFiltered()` + `pickFromDeck()` æŒ‰æ¡ä»¶è¿‡æ»¤æ£€ç´¢ (engine.js:1196-1240)
  - å‰ç«¯: æ£€ç´¢å¼¹çª— UI + é€‰ç‰Œäº¤äº’ (Game.tsx:1447-1484)
  - Socket: `VIEW_TOP_DECK`/`RESOLVE_SEARCH`/`SEARCH_DECK`/`PICK_FROM_DECK` äº‹ä»¶å·²æ³¨å†Œ
  - **å¯å¤ç”¨**: ä¼Šä½/å¥ˆç¾çš„"çœ‹5é€‰1"å¯ç›´æ¥ç”¨ `viewTopDeck(5)` â†’ Search Modal â†’ `resolveSearch()`
  - **å¾…å®Œå–„**: æ£€ç´¢å¼¹çª—ç›®å‰ä¸åštraitè¿‡æ»¤ï¼ˆå¦‚"ç™½èƒ¡å­æµ·ç›—å›¢"/"è‰å¸½ä¸€ä¼™"ï¼‰ï¼Œé€‰ç‰Œå…¨é ç©å®¶è‡ªå¾‹
- [x] **å¼ƒç‰ŒåŒºäº’åŠ¨ (Trash Interaction)** âœ… å·²å®Œæˆ
  - å¼•æ“: `recoverFromTrash()` (å¼ƒç‰Œâ†’æ‰‹ç‰Œ), `playFromTrash()` (å¼ƒç‰Œâ†’åœºä¸Š) (engine.js:950-994)
  - å‰ç«¯: å¢“åœ°æŸ¥çœ‹å™¨ + é€‰ä¸­å¡æ“ä½œ
  - **å¯å¤ç”¨**: ä¹”å·´çš„å›æ”¶ / é©¬å°”é«˜çš„å¤æ´»å¯ç›´æ¥è°ƒç”¨
- [x] **ç”Ÿå‘½åŒºäº’åŠ¨ (Life Interaction)** âœ… å·²å®Œæˆ
  - å¼•æ“: `lifeToHand()` ç”Ÿå‘½â†’æ‰‹ç‰Œ (engine.js:1142-1161)
  - å¼•æ“: `trashToLife()` å¼ƒç‰Œâ†’ç”Ÿå‘½åŒº (engine.js:1245-1257)
  - å¼•æ“: `effectRestrictions.cannotLifeToHand` ç¦æ­¢é™åˆ¶ (engine.js:103-106)
  - å‰ç«¯: é”åŒºæ“ä½œèœå• "ç”Ÿå‘½â†’æ‰‹ç‰Œ"
- [ ] **å’š!!æ“ä½œ (Don Manipulation)** âš ï¸ éƒ¨åˆ†å®ç°
  - âœ… `attachDon(targetId, count)` å·²æ”¯æŒè´´DON
  - âœ… `detachDon(sourceId, count)` å·²æ”¯æŒå–DON  
  - âœ… `moveDon(direction, count)` å·²æ”¯æŒæ¨ª/ç«–è½¬æ¢
  - âŒ å°šæœªæ”¯æŒ"å°†ä¼‘æ¯çŠ¶æ€çš„DONè´´ç»™è§’è‰²"ï¼ˆå¸ƒé²å…‹ST01-011æ•ˆæœï¼‰
  - å½“å‰ `attachDon` ä¼˜å…ˆä½¿ç”¨æ´»è·ƒDONï¼Œä¸è¶³æ—¶æ‰ç”¨ä¼‘æ¯DONï¼Œä½†é€»è¾‘å·²æ”¯æŒä»rested areaæ‰£é™¤
  - **è¯„ä¼°**: å®é™…ä¸Šå½“å‰ `attachDon` å·²èƒ½å¤„ç†ï¼Œå…ˆç”¨ active ä¸å¤Ÿå†ç”¨ restedï¼ŒåŸºæœ¬æ»¡è¶³å¸ƒé²å…‹æ•ˆæœ
- [ ] **å¤šç›®æ ‡é€‰æ‹© (Target Selection)** âŒ æœªå®ç°
  - éœ€è¦æ ¹æ®æ¡ä»¶ï¼ˆå¦‚åŠ›é‡<3000ï¼‰ç­›é€‰åœºä¸Šåˆæ³•ç›®æ ‡çš„ UI
  - å½“å‰è½®ç›˜èœå•ä»…æ”¯æŒå•ç›®æ ‡æ“ä½œï¼Œæ— "é€‰æ‹©Nä¸ªç›®æ ‡"äº¤äº’

### Phase 2: ç™½èƒ¡å­å¡ç»„ (White Beard) â€” å®ç°çŠ¶æ€

| çŠ¶æ€ | å¡å· | åç§° | æŠ€èƒ½ç±»å‹ | å®ç°æƒ…å†µ | å¤‡æ³¨ |
|:---:|:---|:---|:---|:---|:---|
| âœ… | **OP02-001** | **çˆ±å¾·åÂ·çº½å“¥ç‰¹** | [å›åˆç»“æŸæ—¶] | **å·²å®ç°** â€” `_runEndPhase()` è‡ªåŠ¨è§¦å‘ | å¼•æ“ç¡¬ç¼–ç ï¼Œå›åˆç»“æŸè‡ªåŠ¨å°†ç”Ÿå‘½é¡¶ç‰Œå…¥æ‰‹ï¼›å— `cannotLifeToHand` é™åˆ¶ |
| âœ… | OP02-004 | çˆ±å¾·åÂ·çº½å“¥ç‰¹ | [ç™»åœºæ—¶] | **éƒ¨åˆ†å®ç°** â€” ç™»åœºè‡ªåŠ¨è®¾ `cannotLifeToHand=true` | âŒ é¢†è¢–+2000æˆ˜åŠ› buff éœ€ç©å®¶æ‰‹åŠ¨ `modifyPower` |
| ğŸ”§ | OP03-003 | ä¼Šä½ | [ç™»åœºæ—¶] | **å¯å¤ç”¨** â€” `viewTopDeck(5)` â†’ Search Modal | âŒ ç¼ºå°‘ç‰¹å¾è¿‡æ»¤ï¼ˆåº”é™"ç™½èƒ¡å­æµ·ç›—å›¢"ï¼‰ |
| ğŸ”§ | OP01-015 | ä¹”å·´ | [ç™»åœºæ—¶] | **å¯å¤ç”¨** â€” `recoverFromTrash()` | æ‰‹åŠ¨æ“ä½œå³å¯ |
| ğŸ”§ | OP03-013 | é©¬å°”é«˜ | [ç™»åœºæ—¶]/[KOæ—¶] | **éƒ¨åˆ†å¯å¤ç”¨** â€” ç™»åœºKOç”¨ `koTarget`ï¼›å¤æ´»ç”¨ `playFromTrash` | âŒ ç¼º KO è§¦å‘æ—¶çš„å¼¹çª—è¯¢é—®ï¼ˆ"æ˜¯å¦å¼ƒäº‹ä»¶å¤æ´»"ï¼‰ï¼Œéœ€ AutoTriggerPrompt |
| ğŸ”§ | OP01-029 | ç¦»å­å…‰æ³¢ | [åå‡»] | **å¯å¤ç”¨** â€” åå‡»æ—¶ `modifyPower(targetId, +2000/+4000)` | æ¡ä»¶ï¼ˆç”Ÿå‘½â‰¤2ï¼‰éœ€ç©å®¶è‡ªè¡Œåˆ¤æ–­ |
| ğŸ”§ | ST01-012 | è·¯é£ | [å¯åŠ¨ä¸»è¦] | **éƒ¨åˆ†å¯å¤ç”¨** â€” æ•ˆæœ"æ— è§†é˜»æŒ¡"æ— å¯¹åº”çŠ¶æ€ | âŒ å¼•æ“æ—  `ignoreBlocker` çŠ¶æ€ï¼›å½“å‰é˜»æŒ¡æ£€æŸ¥åœ¨ `declareAttack` ä¸­ |
| ğŸ”§ | OP01-013 | å±±æ™º | [ç™»åœºæ—¶] | **æ‰‹åŠ¨å¯è¡Œ** â€” `lifeToHand` + `attachDon(rested)` | éœ€æ‰‹åŠ¨ç»„åˆæ“ä½œ |

### Phase 3: çº¢ç´¢éš†å¡ç»„ (Red Zoro) â€” å®ç°çŠ¶æ€

| çŠ¶æ€ | å¡å· | åç§° | æŠ€èƒ½ç±»å‹ | å®ç°æƒ…å†µ | å¤‡æ³¨ |
|:---:|:---|:---|:---|:---|:---|
| âœ… | **OP01-001** | **ç½—ç½—è¯ºäºšÂ·ä½ç½—** | [å¸¸é©»æ•ˆæœ] | **å·²å®ç°** â€” `_calculatePower()` å…¨å±€å…‰ç¯æ£€æŸ¥ | è´´1å’šæ—¶æˆ‘æ–¹å›åˆæ‰€æœ‰è§’è‰²+1000 |
| ğŸ”§ | OP01-016 | å¥ˆç¾ | [ç™»åœºæ—¶] | **å¯å¤ç”¨** â€” åŒä¼Šä½ `viewTopDeck(5)` | âŒ ç¼ºç‰¹å¾è¿‡æ»¤ï¼ˆåº”é™"è‰å¸½ä¸€ä¼™"ï¼‰ |
| âœ… | OP01-025 | ä½ç½— | [é€Ÿæ”»] | **å·²å®ç°** â€” `_hasKeyword(Rush)` + `canAttackThisTurn=true` | å¼•æ“å·²æ”¯æŒ Rush å…³é”®è¯ |
| ğŸ”§ | ST01-016 | æ¶é­”é£è„š | [ä¸»è¦] | **éƒ¨åˆ†å¯è¡Œ** â€” æ—  `ignoreBlocker` çŠ¶æ€ | âŒ åŒè·¯é£ï¼Œéœ€æ–°å¢å¼•æ“çŠ¶æ€ |
| ğŸ”§ | OP01-026 | ç«æ‹³æª | [åå‡»] | **å¯å¤ç”¨** â€” `modifyPower` + `koTarget` ç»„åˆ | éœ€æ‰‹åŠ¨ä¸¤æ­¥æ“ä½œ |
| ğŸ”§ | EB01-003 | åŸºå¾·&åŸºæ‹‰ | [æ”»å‡»æ—¶] | **å¯å¤ç”¨** â€” `modifyPower(+2000)` | æ¡ä»¶ï¼ˆå¯¹æ‰‹ç”Ÿå‘½â‰¤2ï¼‰éœ€ç©å®¶è‡ªè¡Œåˆ¤æ–­ |
| ğŸ”§ | OP02-013 | è‰¾æ–¯ | [ç™»åœºæ—¶] | **éƒ¨åˆ†å¯è¡Œ** â€” `modifyPower(targetId, -3000)` Ã— 2 | âŒ ç¼ºå¤šç›®æ ‡é€‰æ‹© UI + æ¡ä»¶é€Ÿæ”» |

---

## ğŸ›  ä»éœ€å¼€å‘çš„åŠŸèƒ½

### ä¼˜å…ˆçº§ P0: æ£€ç´¢æ¡ä»¶è¿‡æ»¤å¢å¼º

å½“å‰æ£€ç´¢é€šè¿‡ `viewTopDeck(5)` å±•ç¤ºå…¨éƒ¨5å¼ è®©ç©å®¶è‡ªé€‰ï¼Œ**æ²¡æœ‰æŒ‰ç‰¹å¾/è´¹ç”¨åšå‰ç«¯è¿‡æ»¤é«˜äº®æˆ–é™åˆ¶**ã€‚

**æ–¹æ¡ˆA (æ¨è)**: å‰ç«¯æ£€ç´¢å¼¹çª—å¢åŠ  `filter` propï¼Œå°†ä¸ç¬¦åˆæ¡ä»¶çš„å¡æ ‡ç°/ç¦é€‰
- ä¼Šä½: `filter = { trait: 'ç™½èƒ¡å­æµ·ç›—å›¢' }`
- å¥ˆç¾: `filter = { trait: 'è‰å¸½ä¸€ä¼™' }`
- å¼•æ“ `viewTopDeck` å·²è¿”å›å®Œæ•´å¡ç‰Œæ•°æ®ï¼ˆå« trait å­—æ®µï¼‰ï¼Œå‰ç«¯åªéœ€åŠ é«˜äº®/ç¦ç”¨é€»è¾‘

**æ–¹æ¡ˆB**: æœåŠ¡ç«¯ `resolveSearch` å¢åŠ æ ¡éªŒï¼ˆä¸ç¬¦åˆæ¡ä»¶çš„æ‹’ç»åŠ å…¥æ‰‹ç‰Œï¼‰

### ä¼˜å…ˆçº§ P1: ignoreBlocker çŠ¶æ€

```javascript
// engine.js - è§’è‰²çŠ¶æ€æ‰©å±•
player.characters.push({
  card, attachedDon: 0, state: 'active',
  canAttackThisTurn: false,
  ignoreBlocker: false, // NEW: æ— è§†é˜»æŒ¡çŠ¶æ€
})

// declareAttack ä¸­æ£€æŸ¥
if (attackerSlot.ignoreBlocker) {
  // è·³è¿‡ BLOCK æ­¥éª¤ï¼Œç›´æ¥è¿›å…¥ COUNTER
  this.battleStep = BATTLE_STEPS.COUNTER
}
```

æ¶‰åŠå¡ç‰Œ: ST01-012 è·¯é£ (`[å¯åŠ¨ä¸»è¦]` èµ‹äºˆè‡ªèº«)ã€ST01-016 æ¶é­”é£è„š (äº‹ä»¶å¡èµ‹äºˆæŒ‡å®šå‹æ–¹)

### ä¼˜å…ˆçº§ P1: å¤šç›®æ ‡é€‰æ‹© UI

è‰¾æ–¯(OP02-013)éœ€è¦é€‰æ‹©2ä¸ªå¯¹æ‰‹è§’è‰²å„-3000ã€‚éœ€è¦ä¸€ä¸ª `TargetSelector` ç»„ä»¶ï¼š
- é«˜äº®å¯¹æ‰‹åœºä¸Šæ‰€æœ‰åˆæ³•ç›®æ ‡
- æ”¯æŒé€‰æ‹©æ•°é‡é™åˆ¶ (maxTargets: 2)
- é€‰ä¸­åæ‰§è¡Œ `modifyPower` æ‰¹é‡æ“ä½œ

### ä¼˜å…ˆçº§ P2: KOè§¦å‘æ•ˆæœå¼¹çª—

é©¬å°”é«˜(OP03-013)éœ€è¦åœ¨è¢«KOæ—¶å¼¹çª—è¯¢é—®"æ˜¯å¦å¼ƒä¸€å¼ äº‹ä»¶å¡æ¥å¤æ´»"ã€‚éœ€è¦:
- å¼•æ“åœ¨ KO æ—¶æ£€æŸ¥è¢«KOå¡çš„æ•ˆæœæ–‡æœ¬
- å‘é€ `game:ko-trigger-prompt` äº‹ä»¶ç»™æ‹¥æœ‰è€…
- å‰ç«¯å¼¹çª—å±•ç¤ºæ‰‹ç‰Œä¸­çš„äº‹ä»¶å¡ä¾›é€‰æ‹©

---

## ğŸ—‚ å·²æœ‰ä»£ç å¯å¤ç”¨æ¸…å•

### 1. æ£€ç´¢æ•ˆæœ â€” ä¸¤ç§æ¨¡å¼

#### æ¨¡å¼A: "çœ‹é¡¶Nå¼ é€‰1" (ä¼Šä½/å¥ˆç¾é€‚ç”¨)
```
å®¢æˆ·ç«¯: socketService.viewTopDeck(5)
æœåŠ¡ç«¯: engine.viewTopDeck(socketId, 5) â†’ è¿”å›5å¼ å¡ 
        â†’ socket.emit('game:view-top-result', { cards })
å®¢æˆ·ç«¯: å¼¹å‡º Search Modal â†’ é€‰0~1å¼ 
        â†’ socketService.resolveSearch(selectedIds, bottomIds)
æœåŠ¡ç«¯: engine.resolveSearch() â†’ é€‰ä¸­å…¥æ‰‹ï¼Œå…¶ä½™æ²‰åº•
```

#### æ¨¡å¼B: "æ•´å‰¯ç‰Œç»„æŒ‰æ¡ä»¶æœ" (é€šç”¨æ£€ç´¢)
```
å®¢æˆ·ç«¯: socketService.searchDeck({ trait: 'ç™½èƒ¡å­æµ·ç›—å›¢' })
æœåŠ¡ç«¯: engine.searchDeckFiltered(socketId, filter) â†’ è¿”å›åŒ¹é…å¡
        â†’ socket.emit('game:search-result', { cards })
å®¢æˆ·ç«¯: (éœ€å®ç°) å±•ç¤ºåŒ¹é…å¡åˆ—è¡¨
        â†’ socketService.pickFromDeck(cardInstanceId) â†’ å…¥æ‰‹å¹¶æ´—ç‰Œ
```

### 2. å¼ƒç‰ŒåŒºæ“ä½œé“¾
```
æŸ¥çœ‹å¢“åœ° â†’ Trash Viewer UI (å·²æœ‰)
å›æ”¶åˆ°æ‰‹ç‰Œ â†’ socketService.recoverFromTrash(cardInstanceId)
å¼ƒç‰ŒåŒºç™»åœº â†’ socketService.playFromTrash(cardInstanceId, 'active'|'rested')
```

### 3. æˆ˜åŠ›ä¿®æ”¹
```
Buff:  socketService.powerBoost(targetId, +2000)
Debuff: socketService.powerBoost(targetId, -3000)
å‡é€šè¿‡ modifyPower å®ç°ï¼Œå›åˆç»“æŸè‡ªåŠ¨æ¸…é™¤
```

### 4. ç”Ÿå‘½åŒºæ“ä½œ  
```
ç”Ÿå‘½â†’æ‰‹ç‰Œ: socketService.lifeToHand(0)  // å–æœ€ä¸Šæ–¹
å¼ƒç‰Œâ†’ç”Ÿå‘½: socketService.trashToLife(cardInstanceId)
```

---

## ğŸ“ ä¸‹ä¸€æ­¥æ‰§è¡Œè®¡åˆ’ (ä¿®è®¢ç‰ˆ)

1. ~~**å®ç°é¢†è¢–æ•ˆæœ (P0)**~~ âœ… ç™½èƒ¡å­ OP02-001 + ç´¢éš† OP01-001 å·²å®Œæˆ
2. ~~**æ„å»ºé€šç”¨æ£€ç´¢ç³»ç»Ÿ (P0)**~~ âœ… viewTopDeck + resolveSearch + Search Modal å·²å®Œæˆ
3. **å¢å¼ºæ£€ç´¢å¼¹çª— (P0)**: ä¸º Search Modal æ·»åŠ  trait è¿‡æ»¤é«˜äº®/ç¦é€‰ï¼Œä½¿ä¼Šä½/å¥ˆç¾æ•ˆæœæœ‰è§„åˆ™çº¦æŸ
4. **å®ç° ignoreBlocker (P1)**: è§’è‰²çŠ¶æ€æ‰©å±• + declareAttack é€»è¾‘åˆ†æ”¯ï¼Œæ”¯æŒè·¯é£/æ¶é­”é£è„š
5. **å®ç°å¤šç›®æ ‡é€‰æ‹© UI (P1)**: ä¸ºè‰¾æ–¯(OP02-013)ç­‰éœ€è¦é€‰å¤šç›®æ ‡çš„æ•ˆæœæ„å»º TargetSelector ç»„ä»¶
6. **å®ç° KO è§¦å‘å¼¹çª— (P2)**: ä¸ºé©¬å°”é«˜(OP03-013)ç­‰æœ‰on-KOæ•ˆæœçš„å¡å®ç°è§¦å‘è¯¢é—®æœºåˆ¶
